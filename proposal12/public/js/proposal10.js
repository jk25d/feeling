// Generated by CoffeeScript 1.6.3
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  $(function() {
    var AppRouter, Associate, Associates, AssociatesView, HeaderHolderView, LiveFeeling, LiveFeelings, LiveFeelingsView, LoginView, Me, MeView, NavBar, NavBarView, NewFeelingView, draw_header, draw_login, wookmark, _ref, _ref1, _ref10, _ref11, _ref12, _ref13, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;
    wookmark = function() {
      return $('#tiles > li').wookmark({
        align: 'left',
        autoResize: true,
        container: $('#tiles'),
        offset: 10,
        itemWidth: 230
      });
    };
    draw_login = function() {
      $('#fs_navbar').html(new NavBarView({
        model: new NavBar()
      }).render().el);
      return $('#fs_header').html(new LoginView().render().el);
    };
    draw_header = function() {
      var associates, feelings, me;
      $('#fs_header').html(new HeaderHolderView().render().el);
      $('#fs_header_write').html(new NewFeelingView().render().el);
      me = new Me;
      me.fetch({
        success: function() {
          return $('#fs_header_me').html(new MeView({
            model: me
          }).render().el);
        }
      });
      feelings = new LiveFeelings;
      feelings.fetch({
        success: function() {
          return $('#fs_header_live_feelings').html(new LiveFeelingsView({
            model: feelings
          }).render().el);
        }
      });
      associates = new Associates;
      return associates.fetch({
        success: function() {
          return $('#fs_header_associates').html(new AssociatesView({
            model: associates
          }).render().el);
        }
      });
    };
    NavBar = (function(_super) {
      __extends(NavBar, _super);

      function NavBar() {
        _ref = NavBar.__super__.constructor.apply(this, arguments);
        return _ref;
      }

      NavBar.prototype.defaults = {
        menu: 'login'
      };

      NavBar.prototype.url = '../sessions';

      return NavBar;

    })(Backbone.Model);
    Me = (function(_super) {
      __extends(Me, _super);

      function Me() {
        _ref1 = Me.__super__.constructor.apply(this, arguments);
        return _ref1;
      }

      Me.prototype.url = '../api/me';

      return Me;

    })(Backbone.Model);
    LiveFeeling = (function(_super) {
      __extends(LiveFeeling, _super);

      function LiveFeeling() {
        _ref2 = LiveFeeling.__super__.constructor.apply(this, arguments);
        return _ref2;
      }

      return LiveFeeling;

    })(Backbone.Model);
    LiveFeelings = (function(_super) {
      __extends(LiveFeelings, _super);

      function LiveFeelings() {
        _ref3 = LiveFeelings.__super__.constructor.apply(this, arguments);
        return _ref3;
      }

      LiveFeelings.prototype.model = LiveFeeling;

      LiveFeelings.prototype.url = '../api/live_feelings';

      return LiveFeelings;

    })(Backbone.Collection);
    Associate = (function(_super) {
      __extends(Associate, _super);

      function Associate() {
        _ref4 = Associate.__super__.constructor.apply(this, arguments);
        return _ref4;
      }

      return Associate;

    })(Backbone.Model);
    Associates = (function(_super) {
      __extends(Associates, _super);

      function Associates() {
        _ref5 = Associates.__super__.constructor.apply(this, arguments);
        return _ref5;
      }

      Associates.prototype.model = Associate;

      Associates.prototype.url = '../api/associates';

      return Associates;

    })(Backbone.Collection);
    AssociatesView = (function(_super) {
      __extends(AssociatesView, _super);

      function AssociatesView() {
        _ref6 = AssociatesView.__super__.constructor.apply(this, arguments);
        return _ref6;
      }

      AssociatesView.prototype.tagName = 'div';

      AssociatesView.prototype.template = _.template($('#tpl_associates').html());

      AssociatesView.prototype.render = function(event) {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
      };

      return AssociatesView;

    })(Backbone.View);
    LiveFeelingsView = (function(_super) {
      __extends(LiveFeelingsView, _super);

      function LiveFeelingsView() {
        _ref7 = LiveFeelingsView.__super__.constructor.apply(this, arguments);
        return _ref7;
      }

      LiveFeelingsView.prototype.tagName = 'div';

      LiveFeelingsView.prototype.template = _.template($('#tpl_live_feelings').html());

      LiveFeelingsView.prototype.render = function(event) {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
      };

      return LiveFeelingsView;

    })(Backbone.View);
    MeView = (function(_super) {
      __extends(MeView, _super);

      function MeView() {
        _ref8 = MeView.__super__.constructor.apply(this, arguments);
        return _ref8;
      }

      MeView.prototype.tagName = 'div';

      MeView.prototype.template = _.template($('#tpl_me').html());

      MeView.prototype.render = function(event) {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
      };

      return MeView;

    })(Backbone.View);
    NewFeelingView = (function(_super) {
      __extends(NewFeelingView, _super);

      function NewFeelingView() {
        _ref9 = NewFeelingView.__super__.constructor.apply(this, arguments);
        return _ref9;
      }

      NewFeelingView.prototype.tagName = 'div';

      NewFeelingView.prototype.template = _.template($('#tpl_new_feeling').html());

      NewFeelingView.prototype.render = function(event) {
        this.$el.html(this.template());
        return this;
      };

      return NewFeelingView;

    })(Backbone.View);
    HeaderHolderView = (function(_super) {
      __extends(HeaderHolderView, _super);

      function HeaderHolderView() {
        _ref10 = HeaderHolderView.__super__.constructor.apply(this, arguments);
        return _ref10;
      }

      HeaderHolderView.prototype.tagName = 'div';

      HeaderHolderView.prototype.template = _.template($('#tpl_header_holder').html());

      HeaderHolderView.prototype.render = function(event) {
        this.$el.html(this.template());
        return this;
      };

      return HeaderHolderView;

    })(Backbone.View);
    NavBarView = (function(_super) {
      __extends(NavBarView, _super);

      function NavBarView() {
        _ref11 = NavBarView.__super__.constructor.apply(this, arguments);
        return _ref11;
      }

      NavBarView.prototype.tagName = 'div';

      NavBarView.prototype.template = _.template($('#tpl_navbar').html());

      NavBarView.prototype.render = function(event) {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
      };

      return NavBarView;

    })(Backbone.View);
    LoginView = (function(_super) {
      __extends(LoginView, _super);

      function LoginView() {
        _ref12 = LoginView.__super__.constructor.apply(this, arguments);
        return _ref12;
      }

      LoginView.prototype.tagName = 'div';

      LoginView.prototype.template = _.template($('#tpl_login').html());

      LoginView.prototype.events = {
        'click #login_btn': 'login'
      };

      LoginView.prototype.render = function(event) {
        this.$el.html(this.template());
        return this;
      };

      LoginView.prototype.login = function(event) {
        return $.ajax({
          url: '../sessions',
          type: 'POST',
          dataType: 'json',
          data: {
            user_id: $('#user_id').val(),
            password: $('#password').val()
          },
          success: function(data) {
            return window.location.replace('/');
          }
        });
      };

      return LoginView;

    })(Backbone.View);
    $.ajaxSetup({
      statusCode: {
        401: function() {
          return draw_login();
        },
        403: function() {
          return draw_login();
        }
      }
    });
    AppRouter = (function(_super) {
      __extends(AppRouter, _super);

      function AppRouter() {
        _ref13 = AppRouter.__super__.constructor.apply(this, arguments);
        return _ref13;
      }

      AppRouter.prototype.routes = {
        "": "received_feelings",
        "logout": "logout",
        "signup": "signup",
        "my_feelings": "my_feelings",
        "received_feelings": "received_feelings"
      };

      AppRouter.prototype.logout = function() {
        return $.ajax({
          url: '../sessions',
          type: 'DELETE',
          dataType: 'json',
          success: function(data) {
            return draw_login();
          }
        });
      };

      AppRouter.prototype.signup = function() {
        return window.location.replace('/');
      };

      AppRouter.prototype.my_feelings = function() {
        return window.location.replace('/');
      };

      AppRouter.prototype.received_feelings = function() {
        var navbar;
        navbar = new NavBar;
        return navbar.fetch({
          success: function(model, res) {
            model.set('menu', 'received');
            $('#fs_navbar').html(new NavBarView({
              model: model
            }).render().el);
            return draw_header();
          }
        });
      };

      return AppRouter;

    })(Backbone.Router);
    new AppRouter;
    Backbone.history.start();
    return $('#wordselect > li').on('click', function(event) {
      $('#wordselect').find('.active').removeClass('active');
      return $(this).toggleClass('active');
    });
  });

}).call(this);
