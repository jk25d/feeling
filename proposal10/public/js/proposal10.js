// Generated by CoffeeScript 1.6.3
(function() {
  var wookmark,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  wookmark = function() {
    return $('#tiles > li').wookmark({
      align: 'left',
      autoResize: true,
      container: $('#tiles'),
      offset: 10,
      itemWidth: 230
    });
  };

  $(function() {
    var AppRouter, HeaderView, LoginView, _ref, _ref1, _ref2;
    HeaderView = (function(_super) {
      __extends(HeaderView, _super);

      function HeaderView() {
        _ref = HeaderView.__super__.constructor.apply(this, arguments);
        return _ref;
      }

      HeaderView.prototype.tagName = 'div';

      HeaderView.prototype["class"] = 'container';

      HeaderView.prototype.template = _.template($('#tpl_header').html());

      HeaderView.prototype.render = function(event) {
        this.$el.html(this.template());
        return this;
      };

      return HeaderView;

    })(Backbone.View);
    LoginView = (function(_super) {
      __extends(LoginView, _super);

      function LoginView() {
        _ref1 = LoginView.__super__.constructor.apply(this, arguments);
        return _ref1;
      }

      LoginView.prototype.tagName = 'div';

      LoginView.prototype.template = _.template($('#tpl_login').html());

      LoginView.prototype.events = {
        'click #login-btn': 'login'
      };

      LoginView.prototype.render = function(event) {
        this.$el.html(this.template());
        return this;
      };

      LoginView.prototype.login = function(event) {
        return $.ajax({
          url: '../login',
          type: 'POST',
          dataType: 'json',
          data: {
            userid: $('#userid').val()
          },
          success: function(data) {
            return window.location.replace('#');
          }
        });
      };

      return LoginView;

    })(Backbone.View);
    $.ajaxSetup({
      statusCode: {
        401: function() {
          return window.location.replace('/#login');
        },
        403: function() {
          return window.location.replace('/#login');
        }
      }
    });
    AppRouter = (function(_super) {
      __extends(AppRouter, _super);

      function AppRouter() {
        _ref2 = AppRouter.__super__.constructor.apply(this, arguments);
        return _ref2;
      }

      AppRouter.prototype.routes = {
        "": "ur",
        "login": "login",
        "logout": "logout",
        "signup": "signup",
        "my": "my",
        "ur": "ur"
      };

      AppRouter.prototype.login = function() {
        alert('ew');
        $('#_header').html(new HeaderView({
          user: false
        }).render().el);
        return $('#_content').html(new LoginView({}).render().el);
      };

      AppRouter.prototype.logout = function() {
        return $.ajax({
          url: '../sessions',
          type: 'DELETE',
          dataType: 'json',
          success: function(data) {
            return window.location.replace('/#login');
          }
        });
      };

      AppRouter.prototype.signup = function() {
        return window.location.replace('/#login');
      };

      AppRouter.prototype.my = function() {
        return window.location.replace('/#login');
      };

      AppRouter.prototype.ur = function() {
        return alert('ur');
      };

      return AppRouter;

    })(Backbone.Router);
    new AppRouter;
    Backbone.history.start();
    return $('#wordselect > li').on('click', function(event) {
      $('#wordselect').find('.active').removeClass('active');
      return $(this).toggleClass('active');
    });
  });

}).call(this);
